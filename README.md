# Blink Detection App

(Generated by OpenAI GPT4)

## Application Description
This application is designed to detect blinking in a series of images. By utilizing computer vision techniques with the help of the `dlib` library and the `OpenCV` (cv2) library, the app processes images to determine if any individuals captured within them are blinking. If a person is not blinking, the image is classified as a non-blinking image. The application can be particularly useful in scenarios where non-blinking photos are required, such as ID or passport photo verification.

## Environment Requirements and Dependencies
To run this application, you will need the following:

- Python 3.6 or higher
- OpenCV (cv2) library: for image processing and computer vision tasks.
- dlib library: for face detection and facial landmark prediction.
- imutils library: for easier image manipulation.
- NumPy: for numerical computations and array operations.
- A pre-trained dlib facial landmark predictor model file (`shape_predictor_68_face_landmarks.dat`), which can be downloaded from the dlib-models repository.

### Installing Dependencies
You can install the required dependencies by running the following commands:
```bash
pip install numpy
pip install opencv-python
pip install dlib
pip install imutils
```

## Execution Instructions
To execute the application, perform the following steps:

1. Clone the repository or download the source code to your local machine.
2. Download the `shape_predictor_68_face_landmarks.dat` file from the dlib-models repository and place it in the same directory as the script.
3. Place the images you want to process in a directory named 'photos' or modify the variable `path_to_directory` in the script to match your photos directory.
4. Run the script using the command:
   ```bash
   python blink_detection.py
   ```
5. The script will output the list of images without blinking persons.

## Full Explanation of Code, Libraries, and Functions

### Libraries
- `cv2`: This is the OpenCV library for Python, which provides a vast range of functions for image processing and computer vision.
- `dlib`: A toolkit for machine learning which includes the face detection and facial landmark prediction functionalities.
- `numpy`: A library for numerical computation, which is used here to perform array operations and calculations.
- `os`: This module provides a way to use operating system-dependent functionality like reading or writing to the file system.
- `imutils`: A series of convenience functions to make basic image processing functions such as translation, rotation, resizing, and displaying Matplotlib images easier with OpenCV.

### Functions
- `eye_aspect_ratio`: Calculates the eye aspect ratio (EAR) which quantifies the open state of an eye.
- `is_blinking`: Determines whether the eyes in the given image are closed based on the EAR.
- `process_images`: Processes all images in a given directory and returns a list of images where no blinking is detected.

### Additional Information
The EAR calculation is based on the spatial relationship between certain facial landmarks around the eye. If the EAR falls below a certain threshold (`EAR_THRESHOLD`), it is assumed that the eye is closed, indicating a blink. The `shape_predictor_68_face_landmarks.dat` file is a pre-trained model used by `dlib` to detect the facial landmarks which are necessary to compute the EAR.

## Additional Notes
- Make sure the lighting conditions in the photos are good enough for the face detector to work properly.
- The `shape_predictor_68_face_landmarks.dat` file is quite large (~100 MB) and therefore not included in the repository. It must be downloaded separately.
- The performance and accuracy of the blink detection may vary depending on various factors such as image quality, resolution, and face orientation.

